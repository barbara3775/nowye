"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function t(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}function n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},o=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),o.forEach((function(t){n(e,t,r[t])}))}return e}function i(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}!function(){var e=function(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(e)||""===e)throw new TypeError('Invalid character in header field name: "'+e+'"');return e.toLowerCase()},n=function(e){return"string"!=typeof e&&(e=String(e)),e},s=function(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return On&&(t[Symbol.iterator]=function(){return t}),t},a=function(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0},u=function(e){return new Promise((function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}}))},c=function(e){var t=new FileReader,n=u(t);return t.readAsArrayBuffer(e),n},l=function(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer},f=function(){return this.bodyUsed=!1,this._initBody=function(e){var t;this.bodyUsed=this.bodyUsed,this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:_n&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:xn&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:Tn&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():Cn&&_n&&(t=e)&&DataView.prototype.isPrototypeOf(t)?(this._bodyArrayBuffer=l(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):Cn&&(ArrayBuffer.prototype.isPrototypeOf(e)||Dn(e))?this._bodyArrayBuffer=l(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):Tn&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},_n&&(this.blob=function(){var e=a(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?a(this)||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer)):this.blob().then(c)}),this.text=function(){var e,t,n,r=a(this);if(r)return r;if(this._bodyBlob)return e=this._bodyBlob,t=new FileReader,n=u(t),t.readAsText(e),n;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},xn&&(this.formData=function(){return this.text().then(d)}),this.json=function(){return this.text().then(JSON.parse)},this},d=function(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),o=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(o))}})),t},p=function(e,t){return new Promise((function(o,s){var a=new jn(e,t);if(a.signal&&a.signal.aborted)return s(new Un("Aborted","AbortError"));var u=new XMLHttpRequest;function c(){u.abort()}u.onload=function(){var e,t,n={status:u.status,statusText:u.statusText,headers:(e=u.getAllResponseHeaders()||"",t=new An,e.replace(/\r?\n[\t ]+/g," ").split("\r").map((function(e){return 0===e.indexOf("\n")?e.substr(1,e.length):e})).forEach((function(e){var n=e.split(":"),r=n.shift().trim();if(r){var o=n.join(":").trim();t.append(r,o)}})),t)};n.url="responseURL"in u?u.responseURL:n.headers.get("X-Request-URL");var r="response"in u?u.response:u.responseText;setTimeout((function(){o(new In(r,n))}),0)},u.onerror=function(){setTimeout((function(){s(new TypeError("Network request failed"))}),0)},u.ontimeout=function(){setTimeout((function(){s(new TypeError("Network request failed"))}),0)},u.onabort=function(){setTimeout((function(){s(new Un("Aborted","AbortError"))}),0)},u.open(a.method,function(e){try{return""===e&&Rn.location.href?Rn.location.href:e}catch(t){return e}}(a.url),!0),"include"===a.credentials?u.withCredentials=!0:"omit"===a.credentials&&(u.withCredentials=!1),"responseType"in u&&(_n?u.responseType="blob":Cn&&a.headers.get("Content-Type")&&-1!==a.headers.get("Content-Type").indexOf("application/octet-stream")&&(u.responseType="arraybuffer")),!t||"object"!=i(t.headers)||r(t.headers,An)?a.headers.forEach((function(e,t){u.setRequestHeader(t,e)})):Object.getOwnPropertyNames(t.headers).forEach((function(e){u.setRequestHeader(e,n(t.headers[e]))})),a.signal&&(a.signal.addEventListener("abort",c),u.onreadystatechange=function(){4===u.readyState&&a.signal.removeEventListener("abort",c)}),u.send(void 0===a._bodyInit?null:a._bodyInit)}))},h=function(e,t,n,o){return new(n||(n=Promise))((function(i,s){function a(e){try{c(o.next(e))}catch(e){s(e)}}function u(e){try{c(o.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,r(t,n)?t:new n((function(e){e(t)}))).then(a,u)}c((o=o.apply(e,t||[])).next())}))},v=function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,a[0]&&(s=0)),s;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},y=function(e){for(var t="",n=0;n<e.length;++n)if(n>0){var r=e[n].toLowerCase();r!==e[n]?t+=" ".concat(r):t+=e[n]}else t+=e[n].toUpperCase();return t},b=function(e){return function(e,t,n,r){var o,i=document,s="securitypolicyviolation",a=function(t){var n=new URL(e,location.href),r=t.blockedURI;r!==n.href&&r!==n.protocol.slice(0,-1)&&r!==n.origin||(o=t,u())};i.addEventListener(s,a);var u=function(){return i.removeEventListener(s,a)};return Promise.resolve().then(t).then((function(e){return u(),e}),(function(e){return new Promise((function(e){return setTimeout(e)})).then((function(){if(u(),o)return function(){throw new Error(Jn)}();throw e}))}))}(e,(function(){return function(e){return new Promise((function(t,n){if(function(e){if(URL.prototype)try{return new URL(e,location.href),!1}catch(e){if(r(e,Error)&&"TypeError"===e.name)return!0;throw e}}(e))throw new Error(Kn);var o=document.createElement("script"),i=function(){var e;return null===(e=o.parentNode)||void 0===e?void 0:e.removeChild(o)},s=document.head||document.getElementsByTagName("head")[0];o.onload=function(){i(),t()},o.onerror=function(){i(),n(new Error(Vn))},o.async=!0,o.src=e,s.appendChild(o)}))}(e)})).then(g)},g=function(){var e=window,t="__fpjs_p_l_b",n=e[t];if(function(e,t){var n,r=null===(n=Object.getOwnPropertyDescriptor)||void 0===n?void 0:n.call(Object,e,t);(null==r?void 0:r.configurable)?delete e[t]:r&&!r.writable||(e[t]=void 0)}(e,t),"function"!=typeof(null==n?void 0:n.load))throw new Error(Wn);return n},m=function(e){if(!r(e,Error))throw e},w=function(e){return 0!==e&&100*Math.random()<=e},k=function(e){return E(e)&&e>=0&&e<=100},E=function(e){return"number"==typeof e},S=function(){return(new Date).getTime()},R=function(){return S()},T=function(){return performance.now()},O=function(){return{relative:T(),timeStamp:R()}},_=function(){return void 0===pr&&(pr=performance.timing.navigationStart),pr},x=function(e,t,n){void 0===n&&(n="");var r=e.charCodeAt(t-1),o=r>=55296&&r<=56319?t+1:t;return e.length<=o?e:"".concat(e.slice(0,o)).concat(n)},C=function(e,t,n,r){var o=new Date;o.setTime(o.getTime()+n);var i="expires=".concat(o.toUTCString()),s=r&&r.crossSite?"none":"strict",a=r&&r.domain?";domain=".concat(r.domain):"",u=r&&r.secure?";secure":"";document.cookie="".concat(e,"=").concat(t,";").concat(i,";path=/;samesite=").concat(s).concat(a).concat(u)},P=function(e){return function(e,t){var n=new RegExp("(?:^|;)\\s*".concat(t,"\\s*=\\s*([^;]+)")).exec(e);return n?n[1]:void 0}(document.cookie,e)},D=function(e,t){C(e,"",0,t)},A=function(e,t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];try{return e.apply(void 0,n)}catch(e){fr.error(t,e)}}},L=function(e){return Sr.has(e)},j=function(e){return Or.test(e)?void 0!==window.TextEncoder?(new TextEncoder).encode(e).length:new Blob([e]).size:e.length},I=function(e,t){return-1!==e.indexOf(t)},B=function(e){if(Array.from)return Array.from(e);var t=[];if(r(e,Set))e.forEach((function(e){return t.push(e)}));else for(var n=0;n<e.length;n++)t.push(e[n]);return t},U=function(e){return Object.keys(e).map((function(t){return e[t]}))},q=function(e,t){return e.slice(0,t.length)===t},F=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.forEach((function(t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})),e},M=function(e){return 0===Object.keys(e).length},N=function(){if("object"===("undefined"==typeof globalThis?"undefined":i(globalThis)))return globalThis;Object.defineProperty(Object.prototype,"_dd_temp_",{get:function(){return this},configurable:!0});var e=_dd_temp_;return delete Object.prototype._dd_temp_,"object"!==(void 0===e?"undefined":i(e))&&(e="object"===("undefined"==typeof self?"undefined":i(self))?self:"object"===("undefined"==typeof window?"undefined":i(window))?window:{}),e},G=function(e,t){var n,r=N();return r.Zone&&"function"==typeof r.Zone.__symbol__&&(n=e[r.Zone.__symbol__(t)]),n||(n=e[t]),n},H=function(e){xr=e},J=function(e,t,n){var r=n.value;n.value=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return(kr?K(r):r).apply(this,e)}},K=function(e){return function(){return z(e,this,arguments)}},z=function(e,t,n){try{return e.apply(t,n)}catch(e){if(V(lr.error,e),kr)try{kr(e)}catch(e){V(lr.error,e)}}},V=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];xr&&fr.apply(void 0,_r([e,"[MONITOR]"],t,!1))},W=function(e,t){return G(N(),"setTimeout")(K(e),t)},$=function(e){G(N(),"clearTimeout")(e)},X=function(e,t){return G(window,"setInterval")(K(e),t)},Z=function(e){G(window,"clearInterval")(e)},Y=function(e,t,n){var r,o,i=!n||void 0===n.leading||n.leading,s=!n||void 0===n.trailing||n.trailing,a=!1;return{throttled:function(){for(var n=[],u=0;u<arguments.length;u++)n[u]=arguments[u];a?r=n:(i?e.apply(void 0,n):r=n,a=!0,o=W((function(){s&&r&&e.apply(void 0,r),a=!1,r=void 0}),t))},cancel:function(){$(o),a=!1,r=void 0}}},Q=function(){},ee=function(e,t,n){if("object"!==(void 0===e?"undefined":i(e))||null===e)return JSON.stringify(e);var r=te(Object.prototype),o=te(Array.prototype),s=te(Object.getPrototypeOf(e)),a=te(e);try{return JSON.stringify(e,t,n)}catch(e){return"<error: unable to serialize object>"}finally{r(),o(),s(),a()}},te=function(e){var t=e,n=t.toJSON;return n?(delete t.toJSON,function(){t.toJSON=n}):Q},ne=function(e){return re(e,ie()).href},re=function(e,t){var n=oe();if(n)try{return void 0!==t?new n(e,t):new n(e)}catch(n){throw new Error("Failed to construct URL: ".concat(String(n)," ").concat(ee({url:e,base:t})))}if(void 0===t&&!/:/.test(e))throw new Error("Invalid URL: '".concat(e,"'"));var r=document,o=r.createElement("a");if(void 0!==t){var i=(r=document.implementation.createHTMLDocument("")).createElement("base");i.href=t,r.head.appendChild(i),r.body.appendChild(o)}return o.href=e,o},oe=function(){if(void 0===Er)try{var e=new Cr("http://test/path");Er="http://test/path"===e.href}catch(e){Er=!1}return Er?Cr:void 0},ie=function(){return se(window.location)},se=function(e){if(e.origin)return e.origin;var t=e.host.replace(/(:80|:443)$/,"");return"".concat(e.protocol,"//").concat(t)},ae=function(e,t,n){var r=ue(e,t);return{build:function(o,i,s){var a=le(e,t,n,o,i,s);return r(a)},urlPrefix:r(""),endpointType:t}},ue=function(e,t){var n="/api/v2/".concat(jr[t]),r=e.proxy,o=e.proxyUrl;if(r){var i=ne(r);return function(e){return"".concat(i,"?ddforward=").concat(encodeURIComponent("".concat(n,"?").concat(e)))}}var s=ce(e,t);if(void 0===r&&o){var a=ne(o);return function(e){return"".concat(a,"?ddforward=").concat(encodeURIComponent("https://".concat(s).concat(n,"?").concat(e)))}}return function(e){return"https://".concat(s).concat(n,"?").concat(e)}},ce=function(e,t){var n=e.site,r=void 0===n?Dr:n,o=e.internalAnalyticsSubdomain;if(o&&r===Dr)return"".concat(o,".").concat(Dr);var i=r.split("."),s=i.pop(),a=r!==Ar?"".concat(Lr[t],"."):"";return"".concat(a,"browser-intake-").concat(i.join("-"),".").concat(s)},le=function(e,t,n,r,o,i){var s=e.clientToken,a=e.internalAnalyticsSubdomain,u=["sdk_version:".concat("4.42.2"),"api:".concat(r)].concat(n);o&&L(mr.COLLECT_FLUSH_REASON)&&u.push("flush_reason:".concat(o)),i&&u.push("retry_count:".concat(i.count),"retry_after:".concat(i.lastFailureStatus));var c=["ddsource=browser","ddtags=".concat(encodeURIComponent(u.join(","))),"dd-api-key=".concat(s),"dd-evp-origin-version=".concat(encodeURIComponent("4.42.2")),"dd-evp-origin=browser","dd-request-id=".concat(br())];return"rum"===t&&c.push("batch_time=".concat(R())),a&&c.reverse(),c.join("&")},fe=function(e,t){var n=Ir-e.length-1;(t.length>n||Br.test(t))&&fr.warn("".concat(e," value doesn't meet tag requirements and will be sanitized"));var r=t.replace(/,/g,"_");return"".concat(e,":").concat(r)},de=function(e){var t=function(e){var t=e.env,n=e.service,r=e.version,o=e.datacenter,i=[];return t&&i.push(fe("env",t)),n&&i.push(fe("service",n)),r&&i.push(fe("version",r)),o&&i.push(fe("datacenter",o)),i}(e),n=pe(e,t),r=U(n).map((function(e){return e.urlPrefix})),o=he(e,r,t);return F({isIntakeUrl:function(e){return r.some((function(t){return 0===e.indexOf(t)}))},replica:o,site:e.site||Dr},n)},pe=function(e,t){return{logsEndpointBuilder:ae(e,"logs",t),rumEndpointBuilder:ae(e,"rum",t),sessionReplayEndpointBuilder:ae(e,"sessionReplay",t)}},he=function(e,t,n){if(e.replica){var r=F({},e,{site:Dr,clientToken:e.replica.clientToken}),o={logsEndpointBuilder:ae(r,"logs",n),rumEndpointBuilder:ae(r,"rum",n)};return t.push.apply(t,U(o).map((function(e){return e.urlPrefix}))),F({applicationId:e.replica.applicationId},o)}},ve=function(e){var t,n,r;if(e&&e.clientToken){var o=null!==(t=e.sessionSampleRate)&&void 0!==t?t:e.sampleRate;if(void 0===o||k(o))if(void 0===e.telemetrySampleRate||k(e.telemetrySampleRate)){if(void 0===e.telemetryConfigurationSampleRate||k(e.telemetryConfigurationSampleRate))return Array.isArray(e.enableExperimentalFeatures)&&function(e){e.forEach((function(e){Sr.add(e)}))}(e.enableExperimentalFeatures.filter((function(e){return function(e,t){return Object.keys(e).some((function(n){return e[n]===t}))}(mr,e)}))),F({beforeSend:e.beforeSend&&A(e.beforeSend,"beforeSend threw an error:"),cookieOptions:ye(e),sessionSampleRate:null!=o?o:100,telemetrySampleRate:null!==(n=e.telemetrySampleRate)&&void 0!==n?n:20,telemetryConfigurationSampleRate:null!==(r=e.telemetryConfigurationSampleRate)&&void 0!==r?r:5,service:e.service,silentMultipleInit:!!e.silentMultipleInit,batchBytesLimit:16*Rr,eventRateLimiterThreshold:3e3,maxTelemetryEventsPerPage:15,flushTimeout:30*hr,batchMessagesLimit:50,messageBytesLimit:256*Rr},de(e));fr.error("Telemetry Configuration Sample Rate should be a number between 0 and 100")}else fr.error("Telemetry Sample Rate should be a number between 0 and 100");else fr.error("Session Sample Rate should be a number between 0 and 100")}else fr.error("Client Token is not configured, we will not send any data.")},ye=function(e){var t={};return t.secure=be(e),t.crossSite=!!e.useCrossSiteSessionCookie,e.trackSessionAcrossSubdomains&&(t.domain=function(){if(void 0===gr){for(var e="dd_site_test_".concat(br()),t=window.location.hostname.split("."),n=t.pop();t.length&&!P(e);)n="".concat(t.pop(),".").concat(n),C(e,"test",hr,{domain:n});D(e,{domain:n}),gr=n}return gr}()),t},be=function(e){return!!e.useSecureSessionCookie||!!e.useCrossSiteSessionCookie},ge=function(e){var t=[],n=Se(e,"stack"),r=String(e);return n&&q(n,r)&&(n=n.slice(r.length)),n&&n.split("\n").forEach((function(e){var n=me(e)||we(e)||ke(e)||Ee(e);n&&(!n.func&&n.line&&(n.func=Ur),t.push(n))})),{message:Se(e,"message"),name:Se(e,"name"),stack:t}},me=function(e){var t=Mr.exec(e);if(t){var n=t[2]&&0===t[2].indexOf("native"),r=t[2]&&0===t[2].indexOf("eval"),o=Nr.exec(t[2]);return r&&o&&(t[2]=o[1],t[3]=o[2],t[4]=o[3]),{args:n?[t[2]]:[],column:t[4]?+t[4]:void 0,func:t[1]||Ur,line:t[3]?+t[3]:void 0,url:n?void 0:t[2]}}},we=function(e){var t=Gr.exec(e);if(t)return{args:[],column:t[3]?+t[3]:void 0,func:Ur,line:t[2]?+t[2]:void 0,url:t[1]}},ke=function(e){var t=Hr.exec(e);if(t)return{args:[],column:t[4]?+t[4]:void 0,func:t[1]||Ur,line:+t[3],url:t[2]}},Ee=function(e){var t=Jr.exec(e);if(t){var n=t[3]&&t[3].indexOf(" > eval")>-1,r=Kr.exec(t[3]);return n&&r&&(t[3]=r[1],t[4]=r[2],t[5]=void 0),{args:t[2]?t[2].split(","):[],column:t[5]?+t[5]:void 0,func:t[1]||Ur,line:t[4]?+t[4]:void 0,url:t[3]}}},Se=function(e,t){if("object"===(void 0===e?"undefined":i(e))&&e&&t in e){var n=e[t];return"string"==typeof n?n:void 0}},Re=function(e,t,n){var r=e[t],o=n(r),i=function(){if("function"==typeof o)return o.apply(this,arguments)};return e[t]=i,{stop:function(){e[t]===i?e[t]=r:o=r}}},Te=function(e,t,n){var r=n.before,o=n.after;return Re(e,t,(function(e){return function(){var t,n=arguments;return r&&z(r,this,n),"function"==typeof e&&(t=e.apply(this,n)),o&&z(o,this,n),t}}))},Oe=function(e){return Te(window,"onerror",{before:function(t,n,o,i,s){var a;if(r(s,Error))a=ge(s);else{var u=[{url:n,column:i,line:o}],c=_e(t);a={name:c.name,message:c.message,stack:u}}e(a,null!=s?s:t)}})},_e=function(e){var t,n,r;return"[object String]"==={}.toString.call(e)&&(n=(t=zr.exec(e))[1],r=t[2]),{name:n,message:r}},xe=function(e){return Te(window,"onunhandledrejection",{before:function(t){var n=t.reason||"Empty reason",r=ge(n);e(r,n)}})},Ce=function(e,t){var n;void 0===t&&(t=Vr);var r=te(Object.prototype),o=te(Array.prototype),i=[],s=new WeakMap,a=Pe(e,Wr,void 0,i,s),u=(null===(n=JSON.stringify(a))||void 0===n?void 0:n.length)||0;if(!(u>t)){for(;i.length>0&&u<t;){var c=i.shift(),l=0;if(Array.isArray(c.source))for(var f=0;f<c.source.length;f++){if(u+=void 0!==(d=Pe(c.source[f],c.path,f,i,s))?JSON.stringify(d).length:4,u+=l,l=1,u>t){je(t,"truncated",e);break}c.target[f]=d}else for(var f in c.source)if(Object.prototype.hasOwnProperty.call(c.source,f)){var d;if(void 0!==(d=Pe(c.source[f],c.path,f,i,s))&&(u+=JSON.stringify(d).length+l+f.length+$r,l=1),u>t){je(t,"truncated",e);break}c.target[f]=d}}return r(),o(),a}je(t,"discarded",e)},Pe=function(e,t,n,r,o){var s=Le(e);if(!s||"object"!==(void 0===s?"undefined":i(s)))return De(s);var a=Ae(s);if("[Object]"!==a&&"[Array]"!==a&&"[Error]"!==a)return a;var u=e;if(o.has(u))return"[Reference seen at ".concat(o.get(u),"]");var c=void 0!==n?"".concat(t,".").concat(n):t,l=Array.isArray(s)?[]:{};return o.set(u,c),r.push({source:s,target:l,path:c}),l},De=function(e){return"bigint"===(void 0===e?"undefined":i(e))?"[BigInt] ".concat(e.toString()):"function"==typeof e?"[Function] ".concat(e.name||"unknown"):"symbol"===(void 0===e?"undefined":i(e))?"[Symbol] ".concat(e.description||e.toString()):e},Ae=function(e){try{if(r(e,Event))return{isTrusted:e.isTrusted};var t=Object.prototype.toString.call(e).match(/\[object (.*)\]/);if(t&&t[1])return"[".concat(t[1],"]")}catch(e){}return"[Unserializable]"},Le=function(e){var t=e;if(t&&"function"==typeof t.toJSON)try{return t.toJSON()}catch(e){}return e},je=function(e,t,n){fr.warn("The data provided has been ".concat(t," as it is over the limit of ").concat(e," characters:"),n)},Ie=function(e){var t=e.stackTrace,n=e.originalError,o=e.handlingStack,i=e.startClocks,s=e.nonErrorPrefix,a=e.source,u=e.handling,c=r(n,Error),l=Be(t,c,s,n),f=Ue(c,t)?Fe(t):Xr,d=c?Ne(n,a):void 0;return{startClocks:i,source:a,handling:u,handlingStack:o,originalError:n,type:null==t?void 0:t.name,message:l,stack:f,causes:d,fingerprint:qe(n)}},Be=function(e,t,n,r){return(null==e?void 0:e.message)&&(null==e?void 0:e.name)?e.message:t?"Empty message":"".concat(n," ").concat(ee(Ce(r)))},Ue=function(e,t){return void 0!==t&&(!!e||t.stack.length>0&&(t.stack.length>1||void 0!==t.stack[0].url))},qe=function(e){return r(e,Error)&&"dd_fingerprint"in e?String(e.dd_fingerprint):void 0},Fe=function(e){var t=Me(e);return e.stack.forEach((function(e){var n="?"===e.func?"<anonymous>":e.func,r=e.args&&e.args.length>0?"(".concat(e.args.join(", "),")"):"",o=e.line?":".concat(e.line):"",i=e.line&&e.column?":".concat(e.column):"";t+="\n  at ".concat(n).concat(r," @ ").concat(e.url).concat(o).concat(i)})),t},Me=function(e){return"".concat(e.name||"Error",": ").concat(e.message)},Ne=function(e,t){for(var n=e,o=[];r(null==n?void 0:n.cause,Error)&&o.length<10;){var i=ge(n.cause);o.push({message:n.cause.message,source:t,type:null==i?void 0:i.name,stack:i&&Fe(i)}),n=n.cause}return o.length?o:void 0},Ge=function(e){return function(e){var t=Oe(e).stop,n=xe(e).stop;return{stop:function(){t(),n()}}}((function(t,n){e.notify(Ie({stackTrace:t,originalError:n,startClocks:O(),nonErrorPrefix:"Uncaught",source:Zr.SOURCE,handling:"unhandled"}))}))},He=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=new Yr((function(){var t=e.map((function(e){return e.subscribe((function(e){return n.notify(e)}))}));return function(){return t.forEach((function(e){return e.unsubscribe()}))}}));return n},Je=function(e,t,n,r){return Ke(e,[t],n,r)},Ke=function(e,t,n,r){var o=void 0===r?{}:r,i=o.once,s=o.capture,a=o.passive,u=K(i?function(e){f(),n(e)}:n),c=a?{capture:s,passive:a}:s,l=G(e,"addEventListener");function f(){var n=G(e,"removeEventListener");t.forEach((function(t){return n.call(e,t,u,c)}))}return t.forEach((function(t){return l.call(e,t,u,c)})),{stop:f}},ze=function(e){var t=new Yr((function(){if(window.ReportingObserver){var n=K((function(e){return e.forEach((function(e){t.notify(We(e))}))})),r=new window.ReportingObserver(n,{types:e,buffered:!0});return r.observe(),function(){r.disconnect()}}}));return t},Ve=function(){var e=new Yr((function(){return Je(document,"securitypolicyviolation",(function(t){e.notify($e(t))})).stop}));return e},We=function(e){var t=e.type,n=e.body;return{type:t,subtype:n.id,message:"".concat(t,": ").concat(n.message),stack:Xe(n.id,n.message,n.sourceFile,n.lineNumber,n.columnNumber)}},$e=function(e){var t=Qr.cspViolation,n="'".concat(e.blockedURI,"' blocked by '").concat(e.effectiveDirective,"' directive");return{type:Qr.cspViolation,subtype:e.effectiveDirective,message:"".concat(t,": ").concat(n),stack:Xe(e.effectiveDirective,e.originalPolicy?"".concat(n,' of the policy "').concat(x(e.originalPolicy,100,"..."),'"'):"no policy",e.sourceFile,e.lineNumber,e.columnNumber)}},Xe=function(e,t,n,r,o){return n&&Fe({name:e,message:t,stack:[{func:"?",url:n,line:r,column:o}]})},Ze=function(e,t){var n=window.__ddBrowserSdkExtensionCallback;n&&n({type:e,payload:t})},Ye=function(e){return null===e?"null":Array.isArray(e)?"array":void 0===e?"undefined":i(e)},Qe=function(e){return eo(void 0,e)},et=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=0,o=t;r<o.length;r++){var i=o[r];null!=i&&(e=eo(e,i))}return e},tt=function(){if("undefined"!=typeof WeakSet){var e=new WeakSet;return{hasAlreadyBeenSeen:function(t){var n=e.has(t);return n||e.add(t),n}}}var t=[];return{hasAlreadyBeenSeen:function(e){var n=t.indexOf(e)>=0;return n||t.push(e),n}}},nt=function(e,t){var n,r=new Yr;function o(e,t){return et({type:"telemetry",date:R(),service:e,version:"4.42.2",source:"browser",_dd:{format_version:2},telemetry:t,experimental_features:B(Sr)},void 0!==n?n():{})}return so.telemetryEnabled=!I(io,t.site)&&w(t.telemetrySampleRate),so.telemetryConfigurationEnabled=so.telemetryEnabled&&w(t.telemetryConfigurationSampleRate),to=function(t){if(so.telemetryEnabled){var n=o(e,t);r.notify(n),Ze("telemetry",n)}},function(e){kr=e}(rt),F(so,{maxEventsPerPage:t.maxTelemetryEventsPerPage,sentEventCount:0}),{setContextProvider:function(e){n=e},observable:r,enabled:so.telemetryEnabled}},rt=function(e){ot(F({type:ro.log,status:"error"},it(e)))},ot=function(e){to&&so.sentEventCount<so.maxEventsPerPage&&(so.sentEventCount+=1,to(e))},it=function(e){if(r(e,Error)){var t=ge(e);return{error:{kind:t.name,stack:Fe(st(t))},message:t.message}}return{error:{stack:Xr},message:"".concat("Uncaught"," ").concat(ee(e))}},st=function(e){return e.stack=e.stack.filter((function(e){return!e.url||oo.some((function(t){return q(e.url,t)}))})),e},at=function(e,t){var n;if(void 0===t&&(t=0),no||(no=e),e===no)if(t>=bo)lt();else{var r,o=ht();if(ut()){if(o.lock)return void ct(e,t);if(r=br(),o.lock=r,dt(o,e.options),(o=ht()).lock!==r)return void ct(e,t)}var i=e.process(o);if(ut()&&(o=ht()).lock!==r)ct(e,t);else{if(i&&ft(i,e.options),ut()&&(!i||!bt(i))){if((o=ht()).lock!==r)return void ct(e,t);delete o.lock,dt(o,e.options),i=o}null===(n=e.after)||void 0===n||n.call(e,i||o),lt()}}else go.push(e)},ut=function(){return!!window.chrome||/HeadlessChrome/.test(window.navigator.userAgent)},ct=function(e,t){W((function(){at(e,t+1)}),yo)},lt=function(){no=void 0;var e=go.shift();e&&at(e)},ft=function(e,t){bt(e)?vt(t):(e.expire=String(S()+fo),dt(e,t))},dt=function(e,t){C(vo,pt(e),fo,t)},pt=function(e){return function(e){return Object.keys(e).map((function(t){return[t,e[t]]}))}(e).map((function(e){var t=e[0],n=e[1];return"".concat(t,"=").concat(n)})).join(ho)},ht=function(){var e=P(vo),t={};return yt(e)&&e.split(ho).forEach((function(e){var n=po.exec(e);if(null!==n){var r=n[1],o=n[2];t[r]=o}})),t},vt=function(e){D(vo,e)},yt=function(e){return void 0!==e&&(-1!==e.indexOf(ho)||po.test(e))},bt=function(e){return M(e)},gt=function(e,t,n){var r=new Yr,o=new Yr,i=X((function(){at({options:e,process:function(e){return l(e)?void 0:{}},after:a})}),wr),s=function(){var e=ht();if(l(e))return e;return{}}();function a(e){return l(e)||(e={}),c()&&(!function(e){return s.id!==e.id||s[t]!==e[t]}(e)?s=e:(s={},o.notify())),e}function u(e){var r=n(e[t]),o=r.trackingType,i=r.isTracked;return e[t]=o,i&&!e.id&&(e.id=br(),e.created=String(S())),i}function c(){return void 0!==s[t]}function l(e){return(void 0===e.created||S()-Number(e.created)<lo)&&(void 0===e.expire||S()<Number(e.expire))}return{expandOrRenewSession:Y((function(){var t;at({options:e,process:function(e){var n=a(e);return t=u(n),n},after:function(e){t&&!c()&&function(e){s=e,r.notify()}(e),s=e}})}),wr).throttled,expandSession:function(){at({options:e,process:function(e){return c()?a(e):void 0}})},getSession:function(){return s},renewObservable:r,expireObservable:o,expire:function(){vt(e),a({})},stop:function(){Z(i)}}},mt=function(e,t,n){!function(e){var t=P(vo),n=P(mo),r=P(wo),o=P(ko);if(!t){var i={};n&&(i.id=n),o&&/^[01]$/.test(o)&&(i[So]=o),r&&/^[012]$/.test(r)&&(i[Eo]=r),ft(i,e)}}(e);var r=gt(e,t,n);Oo.push((function(){return r.stop()}));var o=new co(To);function i(){return{id:r.getSession().id,trackingType:r.getSession()[t]}}return Oo.push((function(){return o.stop()})),r.renewObservable.subscribe((function(){o.add(i(),T())})),r.expireObservable.subscribe((function(){o.closeActive(T())})),r.expandOrRenewSession(),o.add(i(),[0,_()][0]),wt((function(){return r.expandOrRenewSession()})),kt((function(){return r.expandSession()})),{findActiveSession:function(e){return o.find(e)},renewObservable:r.renewObservable,expireObservable:r.expireObservable,expire:r.expire}},wt=function(e){var t=Ke(window,["click","touchstart","keydown","scroll"],e,{capture:!0,passive:!0}).stop;Oo.push(t)},kt=function(e){var t=function(){"visible"===document.visibilityState&&e()},n=Je(document,"visibilitychange",t).stop;Oo.push(n);var r=X(t,Ro);Oo.push((function(){Z(r)}))},Et=function(e){return e>=500},St=function(e,t,n,r,o){0===t.transportStatus&&0===t.queuedPayloads.size()&&t.bandwidthMonitor.canHandle(e)?Rt(e,t,n,{onSuccess:function(){return Tt(0,t,n,r,o)},onFailure:function(){t.queuedPayloads.enqueue(e),Ao(t,n,r,o)}}):t.queuedPayloads.enqueue(e)},Rt=function(e,t,n,r){var o=r.onSuccess,i=r.onFailure;t.bandwidthMonitor.add(e),n(e,(function(n){t.bandwidthMonitor.remove(e),Ot(n)?(t.transportStatus=t.bandwidthMonitor.ongoingRequestCount>0?1:2,e.retry={count:e.retry?e.retry.count+1:1,lastFailureStatus:n.status},i()):(t.transportStatus=0,o())}))},Tt=function(e,t,n,r,o){0===e&&t.queuedPayloads.isFull()&&!t.queueFullReported&&(o({message:"Reached max ".concat(r," events size queued for upload: ").concat(Co/Tr,"MiB"),source:Zr.AGENT,startClocks:O()}),t.queueFullReported=!0);var i=t.queuedPayloads;for(t.queuedPayloads=_t();i.size()>0;)St(i.dequeue(),t,n,r,o)},Ot=function(e){return"opaque"!==e.type&&(0===e.status&&!navigator.onLine||408===e.status||429===e.status||Et(e.status))},_t=function(){var e=[];return{bytesCount:0,enqueue:function(t){this.isFull()||(e.push(t),this.bytesCount+=t.bytesCount)},first:function(){return e[0]},dequeue:function(){var t=e.shift();return t&&(this.bytesCount-=t.bytesCount),t},size:function(){return e.length},isFull:function(){return this.bytesCount>=Co}}},xt=function(){return{ongoingRequestCount:0,ongoingByteCount:0,canHandle:function(e){return 0===this.ongoingRequestCount||this.ongoingByteCount+e.bytesCount<=_o&&this.ongoingRequestCount<xo},add:function(e){this.ongoingRequestCount+=1,this.ongoingByteCount+=e.bytesCount},remove:function(e){this.ongoingRequestCount-=1,this.ongoingByteCount-=e.bytesCount}}},Ct=function(e,t,n){var r={transportStatus:0,currentBackoffTime:Do,bandwidthMonitor:xt(),queuedPayloads:_t(),queueFullReported:!1},o=function(n,r){return At(e,t,n,r)};return{send:function(t){St(t,r,o,e.endpointType,n)},sendOnExit:function(n){Pt(e,t,n)}}},Pt=function(e,t,n){var r=n.data,o=n.bytesCount,i=n.flushReason;if(!!navigator.sendBeacon&&o<t)try{var s=e.build("beacon",i);if(navigator.sendBeacon(s,r))return}catch(e){Dt(e)}var a=e.build("xhr",i);jt(a,r)},Dt=function(e){qo||(qo=!0,rt(e))},At=function(e,t,n,r){var o=n.data,i=n.bytesCount,s=n.flushReason,a=n.retry;if(Lt()&&i<t){var u=e.build("fetch",s,a);fetch(u,{method:"POST",body:o,keepalive:!0,mode:"cors"}).then(K((function(e){return null==r?void 0:r({status:e.status,type:e.type})})),K((function(){var t=e.build("xhr",s,a);jt(t,o,r)})))}else{var c=e.build("xhr",s,a);jt(c,o,r)}},Lt=function(){try{return window.Request&&"keepalive"in new Request("http://a")}catch(e){return!1}},jt=function(e,t,n){var r=new XMLHttpRequest;r.open("POST",e,!0),Je(r,"loadend",(function(){null==n||n({status:r.status})}),{once:!0}),r.send(t)},It=function(){var e=Ut();if(e)return{getAllowedWebViewHosts:function(){return JSON.parse(e.getAllowedWebViewHosts())},send:function(t,n){e.send(JSON.stringify({eventType:t,event:n}))}}},Bt=function(e){var t;void 0===e&&(e=null===(t=N().location)||void 0===t?void 0:t.hostname);var n=It();return!!n&&n.getAllowedWebViewHosts().some((function(t){return e===t||function(e,t){return e.slice(-t.length)===t}(e,".".concat(t))}))},Ut=function(){return N().DatadogEventBridge},qt=function(e){var t=e.messagesLimit,n=e.bytesLimit,r=e.durationLimit,o=e.pageExitObservable,i=e.sessionExpireObservable,s=new Yr;o.subscribe((function(e){return l(e.reason)})),i.subscribe((function(){return l("session_expire")}));var a,u=0,c=0;function l(e){if(0!==c){var t=c,n=u;c=0,u=0,f(),s.notify({reason:e,messagesCount:t,bytesCount:n})}}function f(){$(a),a=void 0}return{flushObservable:s,get messagesCount(){return c},notifyBeforeAddMessage:function(e){u+e>=n&&l("bytes_limit"),c+=1,u+=e,void 0===a&&(a=W((function(){l("duration_limit")}),r))},notifyAfterAddMessage:function(){c>=t?l("messages_limit"):u>=n&&l("bytes_limit")},notifyAfterRemoveMessage:function(e){u-=e,0===(c-=1)&&f()}}},Ft=function(e,t,n,r,o,i){var s,a=u(t);function u(t){return new Mo(Ct(t,e.batchBytesLimit,n),qt({messagesLimit:e.batchMessagesLimit,bytesLimit:e.batchBytesLimit,durationLimit:e.flushTimeout,pageExitObservable:r,sessionExpireObservable:o}),e.messageBytesLimit)}return i&&(s=u(i)),{add:function(e,t){void 0===t&&(t=!0),a.add(e),s&&t&&s.add(e)}}},Mt=function(){var e=new Yr((function(){var t=Te(XMLHttpRequest.prototype,"open",{before:Nt}).stop,n=Te(XMLHttpRequest.prototype,"send",{before:function(){Gt.call(this,e)}}).stop,r=Te(XMLHttpRequest.prototype,"abort",{before:Ht}).stop;return function(){t(),n(),r()}}));return e},Nt=function(e,t){Go.set(this,{state:"open",method:e,url:ne(String(t))})},Gt=function(e){var t=this,n=Go.get(this);if(n){var r=n;r.state="start",r.startTime=T(),r.startClocks=O(),r.isAborted=!1,r.xhr=this;var o=!1,i=Te(this,"onreadystatechange",{before:function(){this.readyState===XMLHttpRequest.DONE&&s()}}).stop,s=function(){if(a(),i(),!o){o=!0;var s=n;s.state="complete",s.duration=function(e,t){return t-e}(r.startClocks.timeStamp,R()),s.status=t.status,e.notify(function(e){return F({},e)}(s))}},a=Je(this,"loadend",s).stop;e.notify(r)}},Ht=function(){var e=Go.get(this);e&&(e.isAborted=!0)},Jt=function(){var e=new Yr((function(){if(window.fetch){var t=Re(window,"fetch",(function(t){return function(n,r){var o,i=z(Kt,null,[e,n,r]);return i?(o=t.call(this,i.input,i.init),z(zt,null,[e,o,i])):o=t.call(this,n,r),o}})).stop;return t}}));return e},Kt=function(e,t,n){var o=n&&n.method||r(t,Request)&&t.method||"GET",i=r(t,Request)?t.url:ne(String(t)),s={state:"start",init:n,input:t,method:o,startClocks:O(),url:i};return e.notify(s),s},zt=function(e,t,n){var o=function(t){var o=n;o.state="resolve","stack"in t||r(t,Error)?(o.status=0,o.isAborted=r(t,DOMException)&&t.code===DOMException.ABORT_ERR,o.error=t):"status"in t&&(o.response=t,o.responseType=t.type,o.status=t.status,o.isAborted=!1),e.notify(o)};t.then(K(o),K(o))},Vt=function(e){var t=new Yr((function(){var n=dr[e];return dr[e]=function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];n.apply(console,r);var i=function(){var e,t=new Error;if(!t.stack)try{throw t}catch(e){}return z((function(){var n=ge(t);n.stack=n.stack.slice(2),e=Fe(n)})),e}();z((function(){t.notify(Wt(r,e,i))}))},function(){dr[e]=n}}));return t},Wt=function(e,t,n){var o,i,s=e.map((function(e){return $t(e)})).join(" ");if(t===lr.error){var a=function(e,t){for(var n=0;n<e.length;n+=1){var r=e[n];if(t(r,n))return r}}(e,(function(e){return r(e,Error)}));o=a?Fe(ge(a)):void 0,i=qe(a),s="console error: ".concat(s)}return{api:t,message:s,stack:o,handlingStack:n,fingerprint:i}},$t=function(e){return"string"==typeof e?Ce(e):r(e,Error)?Me(ge(e)):ee(Ce(e),void 0,2)},Xt=function(e,t){void 0===t&&(t=j);var n,r={},o=!1,i=Y((function(r){n=t(ee(r)),o||(o=function(e,t){return e>Ko&&(fr.warn("The ".concat(t," data is over ").concat(Ko/Rr,"KiB. On low connectivity, the SDK has the potential to exhaust the user's upload bandwidth.")),!0)}(n,e))}),zo).throttled;return{getBytesCount:function(){return n},get:function(){return r},add:function(e,t){r[e]=t,i(r)},remove:function(e){delete r[e],i(r)},set:function(e){i(r=e)},getContext:function(){return Qe(r)},setContext:function(e){r=Ce(e),i(r)},setContextProperty:function(e,t){r[e]=Ce(t),i(r)},removeContextProperty:function(e){delete r[e],i(r)},clearContext:function(){r={},n=0}}},Zt=function(){return Boolean(window._DATADOG_SYNTHETICS_INJECTS_RUM||P($o))},Yt=function(){var e=window._DATADOG_SYNTHETICS_PUBLIC_ID||P(Vo);return"string"==typeof e?e:void 0},Qt=function(){var e=window._DATADOG_SYNTHETICS_RESULT_ID||P(Wo);return"string"==typeof e?e:void 0},en=function(e){var t=F({},e);return["id","name","email"].forEach((function(e){e in t&&(t[e]=String(t[e]))})),t},tn=function(e,t,n){return void 0===e?[]:"all"===e||Array.isArray(e)&&e.every((function(e){return I(t,e)}))?"all"===e?t:function(e){var t=new Set;return e.forEach((function(e){return t.add(e)})),B(t)}(e):void fr.error("".concat(n,' should be "all" or an array with allowed values "').concat(t.join('", "'),'"'))},nn=function(e){return w(e.sessionSampleRate)?"1":"0"},rn=function(e,t){var n=on(t)?t:nn(e);return{trackingType:n,isTracked:"1"===n}},on=function(e){return"0"===e||"1"===e},sn=function(e,t,n){var r=n.getHandler(),o=Array.isArray(r)?r:[r];return ni[e]>=ni[n.getLevel()]&&I(o,t)},an=function(e,t,n,r,o,i){var s=Qo.concat(["custom"]),a={};s.forEach((function(e){a[e]=function(e,t,n){var r=0,o=!1;return{isLimitReached:function(){if(0===r&&W((function(){r=0}),vr),(r+=1)<=t||o)return o=!1,!1;if(r===t+1){o=!0;try{n({message:"Reached max number of ".concat(e,"s by minute: ").concat(t),source:Zr.AGENT,startClocks:O()})}finally{o=!1}}return!0}}}(e,t.eventRateLimiterThreshold,i)})),n.subscribe(0,(function(i){var s,u,c,l=i.rawLogsEvent,f=i.messageContext,d=void 0===f?void 0:f,p=i.savedCommonContext,h=void 0===p?void 0:p,v=i.logger,y=void 0===v?o:v,b=function(e){return e-_()}(l.date),g=e.findTrackedSession(b);if(g){var m=h||r(),w=et({service:t.service,session_id:g.id,usr:M(m.user)?void 0:m.user,view:m.view},m.context,un(b),l,y.getContext(),d);!sn(l.status,Yo.http,y)||!1===(null===(s=t.beforeSend)||void 0===s?void 0:s.call(t,w))||(null===(u=w.error)||void 0===u?void 0:u.origin)!==Zr.AGENT&&(null!==(c=a[w.status])&&void 0!==c?c:a.custom).isLimitReached()||n.notify(1,w)}}))},un=function(e){var t=window;if(Zt()){var n=r(t.DD_RUM_SYNTHETICS);return n||ri||(ri=!0,function(e,t){V(lr.debug,e,t),ot(F({type:ro.log,message:e,status:"debug"},t))}("Logs sent before RUM is injected by the synthetics worker",{testId:Yt(),resultId:Qt()})),n}return r(t.DD_RUM);function r(t){if(t&&t.getInternalContext)return t.getInternalContext(e)}},cn=function(e,t){var n=function(e){var t=e.map((function(e){return Ho[e]||(Ho[e]=Vt(e)),Ho[e]}));return He.apply(void 0,t)}(e.forwardConsoleLogs).subscribe((function(e){t.notify(0,{rawLogsEvent:{date:R(),message:e.message,origin:Zr.CONSOLE,error:e.api===lr.error?{origin:Zr.CONSOLE,stack:e.stack,fingerprint:e.fingerprint}:void 0,status:oi[e.api]}})}));return{stop:function(){n.unsubscribe()}}},ln=function(e,t){var n=function(e){var t=[];I(e,Qr.cspViolation)&&t.push(Ve());var n=e.filter((function(e){return e!==Qr.cspViolation}));return n.length&&t.push(ze(n)),He.apply(void 0,t)}(e.forwardReports).subscribe((function(e){var n,r=e.message,o=ii[e.type];o===Zo.error?n={kind:e.subtype,origin:Zr.REPORT,stack:e.stack}:e.stack&&(r+=" Found in ".concat(function(e){var t;return null===(t=/@ (.+)/.exec(e))||void 0===t?void 0:t[1]}(e.stack))),t.notify(0,{rawLogsEvent:{date:R(),message:r,origin:Zr.REPORT,error:n,status:o}})}));return{stop:function(){n.unsubscribe()}}},fn=function(e,t){if(!e.forwardErrorsToLogs)return{stop:Q};var n=(Lo||(Lo=Mt()),Lo).subscribe((function(e){"complete"===e.state&&o("xhr",e)})),r=(jo||(jo=Jt()),jo).subscribe((function(e){"resolve"===e.state&&o("fetch",e)}));function o(n,r){function o(e){t.notify(0,{rawLogsEvent:{message:"".concat(bn(n)," error ").concat(r.method," ").concat(r.url),date:r.startClocks.timeStamp,error:{origin:Zr.NETWORK,stack:e||"Failed to load"},http:{method:r.method,status_code:r.status,url:r.url},status:Zo.error,origin:Zr.NETWORK}})}e.isIntakeUrl(r.url)||!vn(r)&&!Et(r.status)||("xhr"in r?dn(r.xhr,e,o):r.response?hn(r.response,e,o):r.error&&pn(r.error,e,o))}return{stop:function(){n.unsubscribe(),r.unsubscribe()}}},dn=function(e,t,n){"string"==typeof e.response?n(yn(e.response,t)):n(e.response)},pn=function(e,t,n){n(yn(Fe(ge(e)),t))},hn=function(e,t,n){var r=function(e){try{return e.clone()}catch(e){return}}(e);r&&r.body?window.TextDecoder?gn(r.body,t.requestErrorResponseLengthLimit,(function(e,t){n(e?"Unable to retrieve response: ".concat(e):t)})):r.text().then(K((function(e){return n(yn(e,t))})),K((function(e){return n("Unable to retrieve response: ".concat(e))}))):n()},vn=function(e){return 0===e.status&&"opaque"!==e.responseType},yn=function(e,t){return e.length>t.requestErrorResponseLengthLimit?"".concat(e.substring(0,t.requestErrorResponseLengthLimit),"..."):e},bn=function(e){return"xhr"===e?"XHR":"Fetch"},gn=function(e,t,n){!function(e,t,n){var r=e.getReader(),o=[],i=0;function s(){var e,s;if(r.cancel().catch(Q),n.collectStreamBody){var a;if(1===o.length)a=o[0];else{a=new Uint8Array(i);var u=0;o.forEach((function(e){a.set(e,u),u+=e.length}))}e=a.slice(0,n.bytesLimit),s=a.length>n.bytesLimit}t(void 0,e,s)}!function e(){r.read().then(K((function(t){t.done?s():(n.collectStreamBody&&o.push(t.value),(i+=t.value.length)>n.bytesLimit?s():e())})),K((function(e){return t(e)})))}()}(e,(function(e,t,r){if(e)n(e);else{var o=(new TextDecoder).decode(t);r&&(o+="..."),n(void 0,o)}}),{bytesLimit:t,collectStreamBody:!0})},mn=function(e,t,n,r){var o,i=nt("browser-logs-sdk",e);if(Bt()){var s=It();i.observable.subscribe((function(e){return s.send("internal_telemetry",e)}))}else{var a=Ft(e,e.rumEndpointBuilder,t,n,r,null===(o=e.replica)||void 0===o?void 0:o.rumEndpointBuilder);i.observable.subscribe((function(t){return a.add(t,function(e){return e.site===Pr}(e))}))}return i},wn=Object.getOwnPropertyNames,kn=function(e,t){return function(){return t||(0,e[wn(e)[0]])((t={exports:{}}).exports,t),t.exports}}({"../risk-js/package.json":function(e,t){t.exports={name:"@cko/risk",version:"1.8.1",license:"MIT",main:"dist/risk.cjs.js",types:"dist/types/src/index.d.ts",module:"dist/risk-js.esm.js",source:"src/index.ts",files:["dist","src"],engines:{node:">=10"},scripts:{prebuild:"rm -rf ./dist",build:"NODE_ENV=prod rollup -c","build:dev":"NODE_ENV=dev rollup -c",postbuild:"pnpm tsc --emitDeclarationOnly && node package-size","clean:modules":"rm -rf node_modules","clean:build":"rm -rf dist",clean:"pnpm clean:modules && pnpm clean:build",test:"pnpm jest","test:watch":"pnpm jest --watch",lint:"eslint 'src/**/*.{ts,tsx}'",prepublishOnly:"pnpm build",size:"size-limit",analyze:"size-limit --why",dev:"pnpm build:dev && pnpm parcel dev/index.html --port 4000",typescript:"tsc"},husky:{hooks:{"pre-commit":"pnpm lint"}},prettier:{printWidth:80,semi:!0,singleQuote:!0,trailingComma:"es5"},author:"cko-prism","size-limit":[{path:"dist/risk-js.cjs.production.min.js",limit:"20 KB"},{path:"dist/risk-js.esm.js",limit:"20 KB"}],devDependencies:{"@babel/preset-env":"^7.20.2","@babel/preset-typescript":"^7.21.0","@risk/eslint-config":"workspace:*","@rollup/plugin-node-resolve":"^11.2.1","@rollup/plugin-terser":"0.4.4","@rollup/plugin-typescript":"8.2.1","@size-limit/preset-small-lib":"^4.10.2","@swc/core":"^1.3.39","@types/jest":"^29.2.2","@types/node":"^18.11.9","@types/node-fetch":"^2.5.10","@types/uuid":"^8.3.0",dotenv:"^8.2.0",eslint:"7.32.0",husky:"^6.0.0",jest:"^29.3.1","minified-size":"^2.2.0",parcel:"2.9.3",prettier:"^2.7.1",rollup:"^1.32.1","size-limit":"^4.10.2","ts-jest":"^29.0.3",tslib:"^2.4.1",typescript:"^4.2.4"},dependencies:{"@fingerprintjs/fingerprintjs-pro":"3.9.6","whatwg-fetch":"3.6.2","yet-another-abortcontroller-polyfill":"0.0.4"}}}}),En="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||"undefined"!=typeof global&&global;if(void 0===En.AbortController){var Sn={};En.AbortSignal=function(){function e(e){if(e!==Sn)throw new TypeError("Illegal constructor.");EventTarget.call(this),this._aborted=!1}return e.prototype=Object.create(EventTarget.prototype),e.prototype.constructor=e,Object.defineProperty(e.prototype,"onabort",{get:function(){return this._onabort},set:function(e){var t=this._onabort;t&&this.removeEventListener("abort",t),this._onabort=e,this.addEventListener("abort",e)}}),Object.defineProperty(e.prototype,"aborted",{get:function(){return this._aborted}}),e}(),En.AbortController=function(){function e(){this._signal=new AbortSignal(Sn)}return e.prototype=Object.create(Object.prototype),Object.defineProperty(e.prototype,"signal",{get:function(){return this._signal}}),e.prototype.abort=function(){var e=this.signal;e.aborted||(e._aborted=!0,e.dispatchEvent(new Event("abort")))},e}()}var Rn="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||void 0!==Rn&&Rn,Tn="URLSearchParams"in Rn,On="Symbol"in Rn&&"iterator"in Symbol,_n="FileReader"in Rn&&"Blob"in Rn&&function(){try{return new Blob,!0}catch(e){return!1}}(),xn="FormData"in Rn,Cn="ArrayBuffer"in Rn;if(Cn)var Pn=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],Dn=ArrayBuffer.isView||function(e){return e&&Pn.indexOf(Object.prototype.toString.call(e))>-1};function An(e){this.map={},r(e,An)?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}An.prototype.append=function(t,r){t=e(t),r=n(r);var o=this.map[t];this.map[t]=o?o+", "+r:r},An.prototype.delete=function(t){delete this.map[e(t)]},An.prototype.get=function(t){return t=e(t),this.has(t)?this.map[t]:null},An.prototype.has=function(t){return this.map.hasOwnProperty(e(t))},An.prototype.set=function(t,r){this.map[e(t)]=n(r)},An.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},An.prototype.keys=function(){var e=[];return this.forEach((function(t,n){e.push(n)})),s(e)},An.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),s(e)},An.prototype.entries=function(){var e=[];return this.forEach((function(t,n){e.push([n,t])})),s(e)},On&&(An.prototype[Symbol.iterator]=An.prototype.entries);var Ln=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function jn(e,t){if(!r(this,jn))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var n,o,i=(t=t||{}).body;if(r(e,jn)){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new An(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,i||null==e._bodyInit||(i=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new An(t.headers)),this.method=(o=(n=t.method||this.method||"GET").toUpperCase(),Ln.indexOf(o)>-1?o:n),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(i),!("GET"!==this.method&&"HEAD"!==this.method||"no-store"!==t.cache&&"no-cache"!==t.cache)){var s=/([?&])_=[^&]*/;s.test(this.url)?this.url=this.url.replace(s,"$1_="+(new Date).getTime()):this.url+=(/\?/.test(this.url)?"&":"?")+"_="+(new Date).getTime()}}function In(e,t){if(!r(this,In))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText=void 0===t.statusText?"":""+t.statusText,this.headers=new An(t.headers),this.url=t.url||"",this._initBody(e)}jn.prototype.clone=function(){return new jn(this,{body:this._bodyInit})},f.call(jn.prototype),f.call(In.prototype),In.prototype.clone=function(){return new In(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new An(this.headers),url:this.url})},In.error=function(){var e=new In(null,{status:0,statusText:""});return e.type="error",e};var Bn=[301,302,303,307,308];In.redirect=function(e,t){if(-1===Bn.indexOf(t))throw new RangeError("Invalid status code");return new In(null,{status:t,headers:{location:e}})};var Un=Rn.DOMException;try{new Un}catch(e){(Un=function(e,t){this.message=e,this.name=t;var n=Error(e);this.stack=n.stack}).prototype=Object.create(Error.prototype),Un.prototype.constructor=Un}p.polyfill=!0,Rn.fetch||(Rn.fetch=p,Rn.Headers=An,Rn.Request=jn,Rn.Response=In);var qn,Fn=function(e,t){return Fn=Object.setPrototypeOf||r({__proto__:[]},Array)&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},Fn(e,t)},Mn=function(){return Mn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Mn.apply(this,arguments)};!function(e){e.CardToken="card_token",e.RiskJS="riskjs"}(qn||(qn={}));var Nn,Gn,Hn=function(){function e(e){var t=e.framesMode,n=e.dataCollectors,r=void 0===n?[]:n;this.dataCollectors=r,this.framesMode=t,this.deviceSessionId=null,this.fingerprintRequestId=null}return e.prototype.publishData=function(e){return h(this,void 0,void 0,(function(){var t,n,r,o=this;return v(this,(function(i){switch(i.label){case 0:return(t=this.deviceSessionId&&this.fingerprintRequestId)&&!this.framesMode?[2,Promise.resolve(this.deviceSessionId)]:t?[3,2]:[4,Promise.all(this.dataCollectors.map((function(t){return o.framesMode?t.publishData(qn.CardToken,e):t.publishData(qn.RiskJS)})))];case 1:return(n=i.sent()[0])&&(this.deviceSessionId=n.deviceSessionId,this.fingerprintRequestId=n.fingerprintRequestId,this.sealedResult=n.sealedResult),[2,this.deviceSessionId];case 2:return[4,this.dataCollectors[0].persistDeviceData({requestId:this.fingerprintRequestId,sourceType:qn.CardToken,cardToken:e,sealedResult:this.sealedResult})];case 3:return r=i.sent(),this.deviceSessionId=r,[2,this.deviceSessionId]}}))}))},e}(),Jn="Blocked by CSP",Kn="The endpoint parameter is not a valid URL",zn=(y("WrongRegion"),y("SubscriptionNotActive"),y("UnsupportedVersion"),y("InstallationMethodRestricted"),"API key required"),Vn="Failed to load the JS script of the agent",Wn="9319",$n="https://fpnpmcdn.net/v<version>/<apiKey>/loader_v<loaderVersion>.js",Xn=function(e){var t;e.scriptUrlPattern;var n=e.token,o=e.apiKey,i=void 0===o?n:o,s=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["scriptUrlPattern","token","apiKey"]),a=null!==(t=function(e,t){return function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(e,t)?e[t]:void 0}(e,"scriptUrlPattern"))&&void 0!==t?t:$n,u=function(){var e=[],t=function(){e.push({time:new Date,state:document.visibilityState})},n=function(e,t,n,r){return e.addEventListener(t,n,r),function(){return e.removeEventListener(t,n,r)}}(document,"visibilitychange",t);return t(),[e,n]}(),c=u[0],l=u[1];return Promise.resolve().then((function(){if(!i||"string"!=typeof i)throw new Error(zn);return function(e,t){var n,o,i,s,a=[],u=(n=function(e){var t=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}([],e,!0);return{current:function(){return t[0]},postpone:function(){var e=t.shift();void 0!==e&&t.push(e)},exclude:function(){t.shift()}}}(e),s=0,o=function(){return Math.random()*Math.min(3e3,100*Math.pow(2,s++))},i=new Set,[n.current(),function(e,t){var s,a=r(t,Error)?t.message:"";if(a===Jn||a===Kn)n.exclude(),s=0;else if(a===Wn)n.exclude();else if(a===Vn){var u=Date.now()-e.getTime()<50,c=n.current();c&&u&&!i.has(c)&&(i.add(c),s=0),n.postpone()}else n.postpone();var l=n.current();return void 0===l?void 0:[l,null!=s?s:e.getTime()+o()-Date.now()]}]),c=u[0],l=u[1];if(void 0===c)return Promise.reject(new TypeError("The list of script URL patterns is empty"));var f=function(e){var n=new Date,r=function(t){return a.push({url:e,startedAt:n,finishedAt:new Date,error:t})},o=t(e);return o.then((function(){return r()}),r),o.catch((function(e){if(a.length>=5)throw e;var t=l(n,e);if(!t)throw e;var r,o=t[0],i=t[1];return(r=i,new Promise((function(e){return setTimeout(e,r)}))).then((function(){return f(o)}))}))};return f(c).then((function(e){return[e,a]}))}(function(e,t){return(Array.isArray(e)?e:[e]).map((function(e){return function(e,t){var n=encodeURIComponent;return e.replace(/<[^<>]+>/g,(function(e){return"<version>"===e?"3":"<apiKey>"===e?n(t):"<loaderVersion>"===e?n("3.9.6"):e}))}(String(e),t)}))}(a,i),b)})).catch((function(e){throw l(),function(e){return r(e,Error)&&e.message===Wn?new Error(Vn):e}(e)})).then((function(e){var t=e[0],n=e[1];return l(),t.load(Mn(Mn({},s),{ldi:{attempts:n,visibilityStates:c}}))}))},Zn=$n,Yn=(y("HostnameRestricted"),y("IntegrationFailed"),function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];e.forEach((function(e){e.apply(void 0,t)}))}),Qn=function(e){function t(n,r,o){var i=e.call(this)||this;return i.message=n,i.code=r,i.response=o,Object.setPrototypeOf(i,t.prototype),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}Fn(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t}(Error),er=kn().version;!function(e){e.RiskJsStandalone="RiskJsStandalone",e.RiskJsInFramesJs="RiskJsInFramesJs"}(Nn||(Nn={}));var tr="".concat("https://fpjsworker.checkout.com/vKdHeO12gpAymiKK/gWsdhYyK8qHVJMEp","?apiKey=<apiKey>&version=<version>&loaderVersion=<loaderVersion>"),nr=function(){function e(e,t){var n=t.onDataCollected,r=t.onDataPublishBlocked,o=t.onDataPublishFailure,i=t.onDataPublished,s=t.onDataDisabled,a=this;this.fingerprintAgent=null,this.loadTime=null,this.blockTime=null,this.fpPublishTime=null,this.deviceDataPersistTime=null,this.deviceSessionId=null,this.fingerprintRequestId=null,this.status="pending",this.fingerprintPublicKey="",this.onDataPublishFailure=o,this.onDataPublished=i,this.onDataPublishBlocked=r,this.onDataDisabled=s,this.deviceDataEndpoint=e.deviceDataEndpoint,this.riskEndpoint=e.riskEndpoint,this.publicKey=e.publicKey,this.framesMode=e.framesMode,this.riskCallsBlockedPromise=this.createRiskCallsBlockedPromise(this.framesMode?Nn.RiskJsInFramesJs:Nn.RiskJsStandalone);var u=performance.now();this.riskCallsBlockedPromise.then((function(){return h(a,void 0,void 0,(function(){var e,t,r=this;return v(this,(function(o){return e=performance.now(),this.blockTime=e-u,t=performance.now(),this.loadFingerprintJS().then((function(e){var o=performance.now();r.loadTime=o-t,n(),r.fingerprintAgent=e})),[2]}))}))}))}return e.prototype.loadFingerprintJS=function(){return h(this,void 0,void 0,(function(){return v(this,(function(e){return"disabled"===this.status||"blocked"===this.status?[2,null]:[2,Xn({apiKey:this.fingerprintPublicKey,endpoint:this.riskEndpoint,scriptUrlPattern:[tr,Zn],region:"eu"})]}))}))},e.prototype.publishData=function(e,t){return h(this,void 0,void 0,(function(){var n,r,o,i,s,a;return v(this,(function(u){switch(u.label){case 0:return[4,this.riskCallsBlockedPromise];case 1:if(u.sent(),"blocked"===this.status)throw new Error("risk.js calls blocked");if("disabled"===this.status)return this.onDataDisabled(),[2,null];if("published"===this.status)return[2,{deviceSessionId:this.deviceSessionId,fingerprintRequestId:this.fingerprintRequestId}];n={tag:(c=e,{fpjsSource:c,fpjsTimestamp:"".concat(Date.now())})},u.label=2;case 2:return u.trys.push([2,4,,5]),[4,this.publishDeviceData(n)];case 3:return a=u.sent(),r=a.requestId,o=a.sealedResult,this.fingerprintRequestId=r,[3,5];case 4:throw i=u.sent(),this.status="error",m(i),s=or(i,"publishDeviceData"),this.onDataPublishFailure(s,{metrics:this.calculateMetrics()}),new Error("Failure publishing device data");case 5:return[4,this.persistDeviceData({requestId:r,sourceType:e,cardToken:t,sealedResult:o})];case 6:return[2,{deviceSessionId:u.sent(),fingerprintRequestId:r}]}var c}))}))},e.prototype.persistDeviceData=function(e){var t=e.requestId,n=e.sourceType,r=e.cardToken,o=e.sealedResult;return h(this,void 0,void 0,(function(){var e,i,s;return v(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,this.persistFpData(t,n,r,o)];case 1:return e=a.sent().device_session_id,this.status="published",this.onDataPublished({riskSessionId:e,requestId:t,metrics:this.calculateMetrics()}),this.deviceSessionId=e,[2,e];case 2:throw i=a.sent(),this.status="error",m(i),s=or(i,"persistDeviceData"),this.onDataPublishFailure(s,{metrics:this.calculateMetrics()}),new Error("Failure persisting device data");case 3:return[2]}}))}))},e.prototype.persistFpData=function(e,t,n,r){return h(this,void 0,void 0,(function(){var o,i,s,a,u;return v(this,(function(c){switch(c.label){case 0:o=new AbortController,i=setTimeout((function(){return o.abort()}),5e3),c.label=1;case 1:return c.trys.push([1,4,5,6]),s=performance.now(),[4,fetch("".concat(this.deviceDataEndpoint,"/fingerprint?riskSdkVersion=").concat(er),{method:"PUT",body:JSON.stringify({fp_request_id:e,integration_type:t===qn.CardToken?Nn.RiskJsInFramesJs:Nn.RiskJsStandalone,card_token:t===qn.CardToken?n:null,sealed_result:r}),headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:this.publicKey},signal:o.signal})];case 2:if(a=c.sent(),u=performance.now(),this.deviceDataPersistTime=u-s,!a.ok)throw new Qn("Error! status: ".concat(a.status),a.status,a);return[4,a.json()];case 3:return[2,c.sent()];case 4:throw c.sent();case 5:return clearTimeout(i),[7];case 6:return[2]}}))}))},e.prototype.publishDeviceData=function(e){return h(this,void 0,void 0,(function(){var t,n,r;return v(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),t=performance.now(),[4,rr(this,e)];case 1:return n=o.sent(),r=performance.now(),this.fpPublishTime=r-t,[2,n];case 2:throw o.sent();case 3:return[2]}}))}))},e.prototype.calculateMetrics=function(){var e=function(e){var t={};for(var n in e){var r=e[n];r&&(t[n]=r)}return t}({FpPublish:this.fpPublishTime,DeviceDataPersist:this.deviceDataPersistTime,FpLoad:this.loadTime,Block:this.blockTime});return Mn(Mn({},e),{Total:Object.values(e).reduce((function(e,t){return e+t}),0)})},e.prototype.createRiskCallsBlockedPromise=function(e){return h(this,void 0,void 0,(function(){var t=this;return v(this,(function(n){return[2,Promise.all([this.checkHealth(),this.getFingerprintConfiguration({integration_type:e})]).catch((function(e){t.status="blocked",t.onDataPublishBlocked(e)}))]}))}))},e.prototype.checkHealth=function(){return ir("".concat(this.riskEndpoint,"/health"))},e.prototype.getTimeZone=function(){try{return null===Intl||void 0===Intl?void 0:Intl.DateTimeFormat().resolvedOptions().timeZone}catch(e){return null}},e.prototype.getFingerprintConfiguration=function(e){var t=this,n=e.integration_type,r=this.getTimeZone();return ir("".concat(this.deviceDataEndpoint,"/configuration?integrationType=").concat(n,"&riskSdkVersion=").concat(er,"&timezone=").concat(r),{headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:this.publicKey}}).then((function(e){return h(t,void 0,void 0,(function(){var t;return v(this,(function(n){switch(n.label){case 0:return[4,e.json()];case 1:return t=n.sent(),"blocked"!==this.status&&(this.status=t.fingerprint_integration.enabled?"enabled":"disabled"),this.fingerprintPublicKey=t.fingerprint_integration.public_key,[2]}}))}))}))},e}(),rr=function(e,t){return h(void 0,void 0,void 0,(function(){var n,r,o;return v(this,(function(i){switch(i.label){case 0:return null!==e.fingerprintAgent?[3,3]:[4,e.loadFingerprintJS()];case 1:if(null===(n=i.sent()))throw new Error("FingerprintJS is not loaded");return[4,n.get(t)];case 2:return[2,{requestId:(r=i.sent()).requestId,sealedResult:r.sealedResult}];case 3:return[4,e.fingerprintAgent.get(t)];case 4:return[2,{requestId:(o=i.sent()).requestId,sealedResult:o.sealedResult}]}}))}))},or=function(e,t){var n,r={Reason:"AbortError"===(null==e?void 0:e.name)||"TimeoutError"===(null==e?void 0:e.name)?"timeout":null==e?void 0:e.name,Message:null==e?void 0:e.message,Type:t};return"object"==i(n=e)&&n&&"message"in n&&"code"in n&&"response"in n&&(r={Reason:e.response.statusText,Status:e.response.status,Message:null==e?void 0:e.message}),r},ir=function(e,t){return void 0===t&&(t={}),h(void 0,void 0,void 0,(function(){var n;return v(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,fetch(e,t)];case 1:if(!(n=r.sent()).ok)throw new Qn("Request failed: url - ".concat(e,", status: ").concat(n.status),n.status,n);return[2,n];case 2:throw r.sent(),new Error("Request failed: url - ".concat(e));case 3:return[2]}}))}))};!function(e){e.RiskDataCollected="riskDataCollected",e.RiskDataPublished="riskDataPublished",e.RiskDataPublishFailure="riskDataPublishFailure",e.RiskDataPublishBlocked="riskDataPublishBlocked",e.RiskDataPublishDisabled="riskDataPublishDisabled"}(Gn||(Gn={}));var sr=function(){function e(e){var t,n=e.framesMode,r=void 0!==n&&n,o=e.riskEndpoint,i=e.deviceDataEndpoint,s=e.publicKey,a=this;this.handlers=((t={})[Gn.RiskDataPublished]=[],t[Gn.RiskDataCollected]=[],t[Gn.RiskDataPublishFailure]=[],t[Gn.RiskDataPublishBlocked]=[],t[Gn.RiskDataPublishDisabled]=[],t);var u,c,l,f=[(u=nr,c={riskEndpoint:o,deviceDataEndpoint:i,publicKey:s,framesMode:r},l={onDataCollected:function(){Yn(a.handlers[Gn.RiskDataCollected])},onDataPublishBlocked:function(e){Yn(a.handlers[Gn.RiskDataPublishBlocked],e)},onDataPublishFailure:function(e,t){Yn(a.handlers[Gn.RiskDataPublishFailure],e,t)},onDataPublished:function(e){Yn(a.handlers[Gn.RiskDataPublished],e)},onDataDisabled:function(){Yn(a.handlers[Gn.RiskDataPublishDisabled])}},new u(c,l))];this.dataCollectorManager=new Hn({framesMode:r,dataCollectors:f})}return e.prototype.addEventListener=function(e,t){!function(e){return function(e){return Object.keys(e)}(Gn).map((function(e){return Gn[e]})).indexOf(e)>-1}(e)?console.log("event not supported",e):this.handlers[e].push(t)},e.prototype.publishRiskData=function(e){return h(this,void 0,void 0,(function(){return v(this,(function(t){return[2,this.dataCollectorManager.publishData(e)]}))}))},e}(),ar=kn().version,ur=function(){function e(){}return e.init=function(t){if(!t.publicKey||!t.riskEndpoint||!t.deviceDataEndpoint)throw new Error("missing some of the required options for the risk sdk");return e.instance||(e.instance=new sr(t)),e.instance},e}(),cr=ur,lr={log:"log",debug:"debug",info:"info",warn:"warn",error:"error"},fr=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];Object.prototype.hasOwnProperty.call(lr,e)||(e=lr.log),fr[e].apply(fr,t)},dr=console;fr.debug=dr.debug.bind(dr),fr.log=dr.log.bind(dr),fr.info=dr.info.bind(dr),fr.warn=dr.warn.bind(dr),fr.error=dr.error.bind(dr);var pr,hr=1e3,vr=60*hr,yr=60*vr;function br(e){return e?(parseInt(e,10)^16*Math.random()>>parseInt(e,10)/4).toString(16):"".concat(1e7,"-").concat(1e3,"-").concat(4e3,"-").concat(8e3,"-").concat(1e11).replace(/[018]/g,br)}var gr,mr,wr=hr;!function(e){e.PAGEHIDE="pagehide",e.FEATURE_FLAGS="feature_flags",e.RESOURCE_PAGE_STATES="resource_page_states",e.COLLECT_FLUSH_REASON="collect_flush_reason"}(mr||(mr={}));var kr,Er,Sr=new Set,Rr=1024,Tr=1024*Rr,Or=/[^\u0000-\u007F]/,_r=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},xr=!1,Cr=URL,Pr="datad0g.com",Dr="datadoghq.com",Ar="ap1.datadoghq.com",Lr={logs:"logs",rum:"rum",sessionReplay:"session-replay"},jr={logs:"logs",rum:"rum",sessionReplay:"replay"},Ir=200,Br=/[^a-z0-9_:./-]/,Ur="?",qr="((?:file|https?|blob|chrome-extension|native|eval|webpack|snippet|<anonymous>|\\w+\\.|\\/).*?)",Fr="(?::(\\d+))",Mr=new RegExp("^\\s*at (.*?) ?\\(".concat(qr).concat(Fr,"?").concat(Fr,"?\\)?\\s*$"),"i"),Nr=new RegExp("\\((\\S*)".concat(Fr).concat(Fr,"\\)")),Gr=new RegExp("^\\s*at ?".concat(qr).concat(Fr,"?").concat(Fr,"??\\s*$"),"i"),Hr=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,Jr=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)((?:file|https?|blob|chrome|webpack|resource|capacitor|\[native).*?|[^@]*bundle)(?::(\d+))?(?::(\d+))?\s*$/i,Kr=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,zr=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/,Vr=220*Rr,Wr="$",$r=3,Xr="No stack, consider using an instance of Error",Zr={AGENT:"agent",CONSOLE:"console",CUSTOM:"custom",LOGGER:"logger",NETWORK:"network",SOURCE:"source",REPORT:"report"},Yr=function(){function e(e){this.onFirstSubscribe=e,this.observers=[]}return e.prototype.subscribe=function(e){var t=this;return!this.observers.length&&this.onFirstSubscribe&&(this.onLastUnsubscribe=this.onFirstSubscribe()||void 0),this.observers.push(e),{unsubscribe:function(){t.observers=t.observers.filter((function(t){return e!==t})),!t.observers.length&&t.onLastUnsubscribe&&t.onLastUnsubscribe()}}},e.prototype.notify=function(e){this.observers.forEach((function(t){return t(e)}))},e}(),Qr={intervention:"intervention",deprecation:"deprecation",cspViolation:"csp_violation"};function eo(e,t,n){if(void 0===n&&(n=tt()),void 0===t)return e;if("object"!==(void 0===t?"undefined":i(t))||null===t)return t;if(r(t,Date))return new Date(t.getTime());if(r(t,RegExp)){var o=t.flags||[t.global?"g":"",t.ignoreCase?"i":"",t.multiline?"m":"",t.sticky?"y":"",t.unicode?"u":""].join("");return new RegExp(t.source,o)}if(!n.hasAlreadyBeenSeen(t)){if(Array.isArray(t)){for(var s=Array.isArray(e)?e:[],a=0;a<t.length;++a)s[a]=eo(s[a],t[a],n);return s}var u="object"===Ye(e)?e:{};for(var c in t)Object.prototype.hasOwnProperty.call(t,c)&&(u[c]=eo(u[c],t[c],n));return u}}var to,no,ro={log:"log",configuration:"configuration"},oo=["https://www.datadoghq-browser-agent.com","https://www.datad0g-browser-agent.com","http://localhost","<anonymous>"],io=["ddog-gov.com"],so={maxEventsPerPage:0,sentEventCount:0,telemetryEnabled:!1,telemetryConfigurationEnabled:!1},ao=1/0,uo=vr,co=function(){function e(e){var t=this;this.expireDelay=e,this.entries=[],this.clearOldValuesInterval=X((function(){return t.clearOldValues()}),uo)}return e.prototype.add=function(e,t){var n=this,r={value:e,startTime:t,endTime:ao,remove:function(){var e=n.entries.indexOf(r);e>=0&&n.entries.splice(e,1)},close:function(e){r.endTime=e}};return this.entries.unshift(r),r},e.prototype.find=function(e){void 0===e&&(e=ao);for(var t=0,n=this.entries;t<n.length;t++){var r=n[t];if(r.startTime<=e){if(e<=r.endTime)return r.value;break}}},e.prototype.closeActive=function(e){var t=this.entries[0];t&&t.endTime===ao&&t.close(e)},e.prototype.findAll=function(e){return void 0===e&&(e=ao),this.entries.filter((function(t){return t.startTime<=e&&e<=t.endTime})).map((function(e){return e.value}))},e.prototype.reset=function(){this.entries=[]},e.prototype.stop=function(){Z(this.clearOldValuesInterval)},e.prototype.clearOldValues=function(){for(var e=T()-this.expireDelay;this.entries.length>0&&this.entries[this.entries.length-1].endTime<e;)this.entries.pop()},e}(),lo=4*yr,fo=15*vr,po=/^([a-z]+)=([a-z0-9-]+)$/,ho="&",vo="_dd_s",yo=10,bo=100,go=[],mo="_dd",wo="_dd_r",ko="_dd_l",Eo="rum",So="logs",Ro=vr,To=lo,Oo=[],_o=80*Rr,xo=32,Co=3*Tr,Po=vr,Do=hr;function Ao(e,t,n,r){2===e.transportStatus&&W((function(){var o=e.queuedPayloads.first();Rt(o,e,t,{onSuccess:function(){e.queuedPayloads.dequeue(),e.currentBackoffTime=Do,Tt(1,e,t,n,r)},onFailure:function(){e.currentBackoffTime=Math.min(Po,2*e.currentBackoffTime),Ao(e,t,n,r)}})}),e.currentBackoffTime)}var Lo,jo,Io,Bo,Uo,qo=!1,Fo={HIDDEN:"visibility_hidden",UNLOADING:"before_unload",PAGEHIDE:"page_hide",FROZEN:"page_frozen"},Mo=function(){function e(e,t,n){var r=this;this.request=e,this.flushController=t,this.messageBytesLimit=n,this.pushOnlyBuffer=[],this.upsertBuffer={},this.flushController.flushObservable.subscribe((function(e){return r.flush(e)}))}return e.prototype.add=function(e){this.addOrUpdate(e)},e.prototype.upsert=function(e,t){this.addOrUpdate(e,t)},e.prototype.flush=function(e){var t=this.pushOnlyBuffer.concat(U(this.upsertBuffer));this.pushOnlyBuffer=[],this.upsertBuffer={};var n={data:t.join("\n"),bytesCount:e.bytesCount,flushReason:e.reason};!function(e){return I(U(Fo),e)}(e.reason)?this.request.send(n):this.request.sendOnExit(n)},e.prototype.addOrUpdate=function(e,t){var n=this.process(e),r=n.processedMessage,o=n.messageBytesCount;o>=this.messageBytesLimit?fr.warn("Discarded a message whose size was bigger than the maximum allowed size ".concat(this.messageBytesLimit,"KB.")):(this.hasMessageFor(t)&&this.remove(t),this.push(r,o,t))},e.prototype.process=function(e){var t=ee(e);return{processedMessage:t,messageBytesCount:j(t)}},e.prototype.push=function(e,t,n){var r=this.flushController.messagesCount>0?1:0;this.flushController.notifyBeforeAddMessage(t+r),void 0!==n?this.upsertBuffer[n]=e:this.pushOnlyBuffer.push(e),this.flushController.notifyAfterAddMessage()},e.prototype.remove=function(e){var t=this.upsertBuffer[e];delete this.upsertBuffer[e];var n=j(t),r=this.flushController.messagesCount>1?1:0;this.flushController.notifyAfterRemoveMessage(n+r)},e.prototype.hasMessageFor=function(e){return void 0!==e&&void 0!==this.upsertBuffer[e]},e}(),No=function(){function e(){this.callbacks={}}return e.prototype.notify=function(e,t){var n=this.callbacks[e];n&&n.forEach((function(e){return e(t)}))},e.prototype.subscribe=function(e,t){var n=this;return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t),{unsubscribe:function(){n.callbacks[e]=n.callbacks[e].filter((function(e){return t!==e}))}}},e}(),Go=new WeakMap,Ho={},Jo=function(){function e(){this.buffer=[]}return e.prototype.add=function(e){this.buffer.push(e)>500&&this.buffer.splice(0,1)},e.prototype.drain=function(){this.buffer.forEach((function(e){return e()})),this.buffer.length=0},e}(),Ko=3*Rr,zo=200,Vo="datadog-synthetics-public-id",Wo="datadog-synthetics-result-id",$o="datadog-synthetics-injects-rum",Xo=32*Rr,Zo={debug:"debug",error:"error",info:"info",warn:"warn"},Yo={console:"console",http:"http",silent:"silent"},Qo=Object.keys(Zo),ei=function(){function e(e,t,n,r,o){void 0===n&&(n=Yo.http),void 0===r&&(r=Zo.debug),void 0===o&&(o={}),this.handleLogStrategy=e,this.handlerType=n,this.level=r,this.contextManager=Xt("logger context"),this.contextManager.set(F({},o,t?{logger:{name:t}}:void 0))}return e.prototype.log=function(e,t,n,o){var i;if(void 0===n&&(n=Zo.info),n===Zo.error&&(i={origin:Zr.LOGGER}),null!=o){var s=r(o,Error)?ge(o):void 0,a=Ie({stackTrace:s,originalError:o,nonErrorPrefix:"Provided",source:Zr.LOGGER,handling:"handled",startClocks:O()});i={origin:Zr.LOGGER,stack:a.stack,kind:a.type,message:a.message}}var u=Ce(t),c=i?et({error:i},u):u;this.handleLogStrategy({message:Ce(e),context:c,status:n},this)},e.prototype.debug=function(e,t,n){this.log(e,t,Zo.debug,n)},e.prototype.info=function(e,t,n){this.log(e,t,Zo.info,n)},e.prototype.warn=function(e,t,n){this.log(e,t,Zo.warn,n)},e.prototype.error=function(e,t,n){this.log(e,t,Zo.error,n)},e.prototype.setContext=function(e){this.contextManager.set(e)},e.prototype.getContext=function(){return this.contextManager.get()},e.prototype.addContext=function(e,t){this.contextManager.add(e,t)},e.prototype.removeContext=function(e){this.contextManager.remove(e)},e.prototype.setHandler=function(e){this.handlerType=e},e.prototype.getHandler=function(){return this.handlerType},e.prototype.setLevel=function(e){this.level=e},e.prototype.getLevel=function(){return this.level},function(e,t,n,r){var o,s=arguments.length,a=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":i(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var u=e.length-1;u>=0;u--)(o=e[u])&&(a=(s<3?o(a):s>3?o(t,n,a):o(t,n))||a);s>3&&a&&Object.defineProperty(t,n,a)}([J],e.prototype,"log",null),e}(),ti="logs",ni=((Io={})[Zo.debug]=0,Io[Zo.info]=1,Io[Zo.warn]=2,Io[Zo.error]=3,Io),ri=!1,oi=((Bo={})[lr.log]=Zo.info,Bo[lr.debug]=Zo.debug,Bo[lr.info]=Zo.info,Bo[lr.warn]=Zo.warn,Bo[lr.error]=Zo.error,Bo),ii=((Uo={})[Qr.cspViolation]=Zo.error,Uo[Qr.intervention]=Zo.error,Uo[Qr.deprecation]=Zo.warn,Uo),si=No,ai=function(e){var t=!1,n=Xt("global context"),r=Xt("user"),o={},i=function(){},s=new Jo,a=function(e,t,n,r){void 0===n&&(n=Qe(l())),void 0===r&&(r=R()),s.add((function(){return a(e,t,n,r)}))},u=function(){},c=new ei((function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return a.apply(void 0,e)}));function l(){return{view:{referrer:document.referrer,url:window.location.href},context:n.getContext(),user:r.getContext()}}return function(e){var t=F({version:"4.42.2",onReady:function(e){e()}},e);return Object.defineProperty(t,"_setDebug",{get:function(){return H},enumerable:!1}),t}({logger:c,init:K((function(n){var r;if(u=function(){return Qe(n)},Bt()&&(n=function(e){return F({},e,{clientToken:"empty"})}(n)),function(e){if(t)return e.silentMultipleInit||fr.error("DD_LOGS is already initialized."),!1;return!0}(n)){var o=function(e){var t=ve(e),n=tn(e.forwardConsoleLogs,U(lr),"Forward Console Logs"),r=tn(e.forwardReports,U(Qr),"Forward Reports");if(t&&n&&r)return e.forwardErrorsToLogs&&!I(n,lr.error)&&n.push(lr.error),F({forwardErrorsToLogs:!1!==e.forwardErrorsToLogs,forwardConsoleLogs:n,forwardReports:r,requestErrorResponseLengthLimit:Xo},t)}(n);o&&(r=e(n,o,l,c),a=r.handleLog,i=r.getInternalContext,s.drain(),t=!0)}})),getLoggerGlobalContext:K(n.get),getGlobalContext:K(n.getContext),setLoggerGlobalContext:K(n.set),setGlobalContext:K(n.setContext),addLoggerGlobalContext:K(n.add),setGlobalContextProperty:K(n.setContextProperty),removeLoggerGlobalContext:K(n.remove),removeGlobalContextProperty:K(n.removeContextProperty),clearGlobalContext:K(n.clearContext),createLogger:K((function(e,t){return void 0===t&&(t={}),o[e]=new ei((function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return a.apply(void 0,e)}),Ce(e),t.handler,t.level,Ce(t.context)),o[e]})),getLogger:K((function(e){return o[e]})),getInitConfiguration:K((function(){return u()})),getInternalContext:K((function(e){return i(e)})),setUser:K((function(e){(function(e){var t="object"===Ye(e);return t||fr.error("Unsupported user:",e),t})(e)&&r.setContext(en(e))})),getUser:K(r.getContext),setUserProperty:K((function(e,t){var n,o=en((n={},n[e]=t,n))[e];r.setContextProperty(e,o)})),removeUserProperty:K(r.removeContextProperty),clearUser:K(r.clearContext)})}((function(e,t,n,r){var o=new si;o.subscribe(1,(function(e){return Ze("logs",e)}));var i=function(e){return o.notify(0,{rawLogsEvent:{message:e.message,date:e.startClocks.timeStamp,error:{origin:Zr.AGENT},origin:Zr.AGENT,status:Zo.error}})},s=function(){var e=new Yr((function(){var t=L(mr.PAGEHIDE),n=Ke(window,["visibilitychange","freeze","pagehide"],(function(n){"pagehide"===n.type&&t?e.notify({reason:Fo.PAGEHIDE}):"visibilitychange"===n.type&&"hidden"===document.visibilityState?e.notify({reason:Fo.HIDDEN}):"freeze"===n.type&&e.notify({reason:Fo.FROZEN})}),{capture:!0}).stop,r=Q;return t||(r=Je(window,"beforeunload",(function(){e.notify({reason:Fo.UNLOADING})})).stop),function(){n(),r()}}));return e}(),a=!function(e){if(void 0===document.cookie||null===document.cookie)return!1;try{var t="dd_cookie_test_".concat(br()),n="test";C(t,n,vr,e);var r=P(t)===n;return D(t,e),r}catch(e){return fr.error(e),!1}}(t.cookieOptions)||Bt()||Zt()?function(e){var t="1"===nn(e)?{}:void 0;return{findTrackedSession:function(){return t},expireObservable:new Yr}}(t):function(e){var t=mt(e.cookieOptions,ti,(function(t){return rn(e,t)}));return{findTrackedSession:function(e){var n=t.findActiveSession(e);return n&&"1"===n.trackingType?{id:n.id}:void 0},expireObservable:t.expireObservable}}(t);mn(t,i,s,a.expireObservable).setContextProvider((function(){var e,t,n,r,o,i;return{application:{id:null===(e=un())||void 0===e?void 0:e.application_id},session:{id:null===(t=a.findTrackedSession())||void 0===t?void 0:t.id},view:{id:null===(r=null===(n=un())||void 0===n?void 0:n.view)||void 0===r?void 0:r.id},action:{id:null===(i=null===(o=un())||void 0===o?void 0:o.user_action)||void 0===i?void 0:i.id}}})),fn(t,o),function(e,t){if(!e.forwardErrorsToLogs)return{stop:Q};var n=new Yr,r=Ge(n).stop,o=n.subscribe((function(e){t.notify(0,{rawLogsEvent:{message:e.message,date:e.startClocks.timeStamp,error:{kind:e.type,origin:Zr.SOURCE,stack:e.stack},origin:Zr.SOURCE,status:Zo.error}})}))}(t,o),cn(t,o),ln(t,o);var u=function(e){return{handleLog:function(t,n,r,o){var i=t.context;sn(t.status,Yo.console,n)&&fr(t.status,t.message,et(n.getContext(),i)),e.notify(0,{rawLogsEvent:{date:o||R(),message:t.message,status:t.status,origin:Zr.LOGGER},messageContext:i,savedCommonContext:r,logger:n})}}}(o).handleLog;an(a,t,o,n,r,i),Bt()?function(e){var t=It();e.subscribe(1,(function(e){t.send("log",e)}))}(o):function(e,t,n,r,o){var i,s=Ft(e,e.logsEndpointBuilder,n,r,o,null===(i=e.replica)||void 0===i?void 0:i.logsEndpointBuilder);t.subscribe(1,(function(e){s.add(e)}))}(t,o,i,s,a.expireObservable),function(e){so.telemetryConfigurationEnabled&&ot({type:ro.configuration,configuration:e})}(function(e){var t=function(e){var t,n,r=null!==(t=e.proxy)&&void 0!==t?t:e.proxyUrl;return{session_sample_rate:null!==(n=e.sessionSampleRate)&&void 0!==n?n:e.sampleRate,telemetry_sample_rate:e.telemetrySampleRate,telemetry_configuration_sample_rate:e.telemetryConfigurationSampleRate,use_before_send:!!e.beforeSend,use_cross_site_session_cookie:e.useCrossSiteSessionCookie,use_secure_session_cookie:e.useSecureSessionCookie,use_proxy:void 0!==r?!!r:void 0,silent_multiple_init:e.silentMultipleInit,track_session_across_subdomains:e.trackSessionAcrossSubdomains,track_resources:e.trackResources,track_long_task:e.trackLongTasks}}(e);return F({forward_errors_to_logs:e.forwardErrorsToLogs,forward_console_logs:e.forwardConsoleLogs,forward_reports:e.forwardReports},t)}(e));var c=function(e){return{get:function(t){var n=e.findTrackedSession(t);if(n)return{session_id:n.id}}}}(a);return{handleLog:u,getInternalContext:c.get}}));!function(e,t,n){var r=e[t];e[t]=n,r&&r.q&&r.q.forEach((function(e){return A(e,"onReady callback threw an error:")()}))}(N(),"DD_LOGS",ai);var ui=function(e){var t=function(e){var t=e.lastIndexOf("_");if(-1===t)throw new Error("Not a valid public key");return{keyId:e.slice(0,t),key:e.slice(t+1)}}(e),n=t.keyId,r=t.key,o="".concat(r.substring(0,5)).concat("*".repeat(r.length-10)).concat(r.substring(r.length-5));return"".concat(n,"_").concat(o)},ci=function(e,t){return"EventType: ".concat(e,", MaskedPublicKey: ").concat(t)},li=function(e,t){return{Properties:o({EventType:e,MaskedPublicKey:t,RiskSDKVersion:ar},arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}},fi=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return t(e,null,[{key:"init",value:function(e){if(!e)throw new Error("Risk.js requires a public key");if(!fi.instance){fi.instance=cr.init({riskEndpoint:"https://fpjs.checkout.com",deviceDataEndpoint:"https://risk.checkout.com/collect",framesMode:!1,publicKey:e});(function(e,t){var n=ui(t);ai.init({clientToken:"pubf1518f9fba0a576a86da5bf838fe29a1",site:"datadoghq.com",service:"prism.risk.js",forwardErrorsToLogs:!1,sessionSampleRate:100,env:"prod",version:"1.4.10"}),e.addEventListener(Gn.RiskDataPublishFailure,(function(e,t){var r=t.metrics;ai.logger.error(ci(Gn.RiskDataPublishFailure,n),li(Gn.RiskDataPublishFailure,n,{Error:o({},e),Elapsed:r}))})),e.addEventListener(Gn.RiskDataPublishBlocked,(function(e){var t={Message:(null==e?void 0:e.message)||"Unknown error"};ai.logger.error(ci(Gn.RiskDataPublishBlocked,n),li(Gn.RiskDataPublishBlocked,n,{Error:t}))})),e.addEventListener(Gn.RiskDataPublishDisabled,(function(e){var t={Message:(null==e?void 0:e.message)||"Feature flag disabled"};ai.logger.error(ci(Gn.RiskDataPublishDisabled,n),li(Gn.RiskDataPublishDisabled,n,{Error:t}))})),e.addEventListener(Gn.RiskDataPublished,(function(e){var t=e.riskSessionId,r=e.requestId,o=e.metrics;ai.logger.info(ci(Gn.RiskDataPublished,n),li(Gn.RiskDataPublished,n,{DeviceSessionId:t,RequestId:r,Elapsed:o}))}))})(fi.instance,e)}return fi.instance}}]),e}();window.Risk=fi}();