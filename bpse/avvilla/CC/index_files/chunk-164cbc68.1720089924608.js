(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-164cbc68"],{"0c25":function(e,t,i){"use strict";i.r(t);var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"verifyCode-container"},[t("div",{staticClass:"verifyCode-container-children"},[t("div",{staticClass:"verifyCode_title"},[t("div",{staticClass:"p1"},[e._v(e._s(e.$t("loginPage.tips")))]),t("div",{staticClass:"p2"},[e._v(e._s(e.email))])]),t("div",{staticClass:"verifyCode_content"},[e._l(e.number,(function(i,s){return t("span",{key:s,class:s===e.value.length?"active":"",on:{click:e.changeBlur}},[e._v(e._s(e.value[s]))])})),t("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],ref:"input",attrs:{type:"input",maxlength:6},domProps:{value:e.value},on:{input:function(t){t.target.composing||(e.value=t.target.value)}}})],2),e.codeTime>0?t("div",{staticClass:"tips"},[e._v(" "+e._s(e.$t("nav.codeTitle3"))+" "+e._s(e.codeTime)+e._s(e.$t("nav.codeSecond"))+" ")]):t("div",{staticClass:"tips"},[e._v(" "+e._s(e.$t("nav.codeTitle2"))+" "),t("span",{on:{click:e.getEmailCode}},[e._v("Â "+e._s(e.$t("nav.login_getCode"))+" ")])])]),t("footer",[t("powered-by")],1)])},a=[],o=(i("14d9"),i("2f62")),r=i("eec8"),l=i("ed08"),n=i("3591"),c={name:"verifyCode",data(){return{number:6,value:"",codeTime:0,timeVal:null,showLoading:!1,codeClickStatus:!0,email:""}},mounted(){},activated(){this.email=this.$store.state.userEmail?Object(r["a"])(this.$store.state.userEmail):"",this.value="",setTimeout(()=>{this.changeBlur()},500),this.codeTime=sessionStorage.getItem("codeTime")?sessionStorage.getItem("codeTime"):"",this.codeTime>0&&(clearInterval(this.timeVal),this.timeVal=setInterval(()=>{this.codeTime--,sessionStorage.setItem("codeTime",this.codeTime),this.codeTime<=0&&(window.clearInterval(this.timeVal),this.timeVal=null)},1e3))},methods:{changeBlur(){this.$refs.input.focus()},getEmailCode(){if(!0===this.codeClickStatus){let e=this;this.codeClickStatus=!1,this.value="",this.changeBlur();let t={email:this.$store.state.userEmail};this.$axios.post(this.$api.post_sendEmail,t,"").then(t=>{t&&(e.codeTime=300,sessionStorage.setItem("codeTime",e.codeTime),e.codeClickStatus=!0,window.clearInterval(e.timeVal),e.timeVal=null,e.timeVal=setInterval(()=>{e.codeTime--,e.codeTime<=0&&(window.clearInterval(e.timeVal),e.timeVal=null)},1e3))}).catch(()=>{e.codeClickStatus=!1})}},async toLogin(){if(Object(l["k"])(["getKycTokenByOnfidoWay","kyc_info_onfido","kycRule","kycStatus","goKycStatusAfterLogin"]),this.netActive&&this.showLoading){const e=await Object(n["b"])(),t={email:this.$store.state.userEmail,verificationCode:Object(r["b"])(this.value),fingerprintId:e};this.$axios.postForm(this.$api.post_login,t).then(e=>{if(e&&e.data){if(this.codeErrorState=!1,this.$store.state.isLogin=!0,this.$store.state.menuState="login",Object(l["k"])("loginOut"),localStorage.setItem("login_email",this.$store.state.userEmail),setTimeout(async()=>{this.showLoading=!1;let e=await Object(n["h"])();"1"===e&&Object(n["a"])()},2e3),"60000"===this.$route.query.redirectCode)try{const e=JSON.parse(localStorage.getItem("apiRouterObject")),{query:t}=e||{},i=localStorage.getItem("token"),s=localStorage.getItem("userNo"),a=localStorage.getItem("email"),o=`${s}@ACH@${t.id}@PAY@${a}@IO@${i}`;if(t)return void this.$router.replace({path:"/paymentMethod",query:{...t,token:o,email:a}}).then(()=>{Object(l["k"])("apiRouterObject")})}catch(t){console.error(t)}if("true"===localStorage.getItem("goKycStatusAfterLogin"))return Object(l["k"])("goKycStatusAfterLogin"),void this.$router.replace("/kycStatus");if(!0===this.$store.state.routerQueryPath)return void this.$router.push("/");if(this.merchantInfo.merchantQueryInfo.cryptoSlave)return void this.$router.push("/paymentMethod");"tradeList"===this.$route.query.fromName?this.$router.replace("/tradeHistory"):"buyCrypto"===this.emailFromPath?this.merchantInfo.merchantStatus&&this.merchantInfo.merchantQueryInfo.address?this.$router.replace("/paymentMethod"):this.$router.replace("/receivingMode"):"sellCrypto"===this.emailFromPath?this.$router.replace("/sell-formUserInfo"):"Refund"===this.emailFromPath?this.$router.replace("/Refund?cryptocurrency="+this.$store.state.emailFromquery_refund_view.cryptocurrency):"tradeHistory-details"===this.emailFromPath?this.$router.replace("/tradeHistory-details?orderId="+this.$store.state.emailFromquery_tradeHistoryDetails_view.orderId):"sellOrder"===this.emailFromPath?this.$router.replace("/sellOrder?orderId="+this.$store.state.emailFromquery_sellCardInfo_view.orderId):this.$router.push("/")}}).catch(e=>e&&"110"===e.returnCode?(this.isKycLoginToast(this.$parent),this.showLoading=!1,void(this.value="")):e&&["10002","10003","1026","1027","1025"].includes(e.returnCode)?(this.codeErrorState=!1,this.showLoading=!1,this.$toast({duration:3e3,message:e.returnMsg}),void(this.value="")):void(this.showLoading=!1))}else this.value.length<6&&(this.showLoading=!1,this.$toast({duration:3e3,message:this.$t("nav.login_VerifyCode")}))}},computed:{netActive(){return 6===this.value.length||(isNaN(this.value),!1)},...Object(o["b"])({emailFromPath:e=>e.emailFromPath}),...Object(o["b"])("buyCryptoMerchant",{merchantInfo:e=>e.merchantInfo})},watch:{value(e){e.length>=6&&(this.showLoading=!0,this.toLogin())}}},h=c,u=(i("61eb"),i("2877")),d=Object(u["a"])(h,s,a,!1,null,"5d56c5aa",null);t["default"]=d.exports},"2bda":function(e,t,i){},"61eb":function(e,t,i){"use strict";i("2bda")}}]);